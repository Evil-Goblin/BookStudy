## 타입스크립트 사용시 고려할 점
- 라이브러리의 버전
- 타입 선언(`@types`)의 버전
- 타입스크립트의 버전

위의 세 가지중 하나라도 맞지 않으면 엉뚱한 에러가 발생할 수 있다.

```shell
$ npm install react
+ react@16.8.6

$ npm install --save-dev @types/react
+ @types/react@16.8.19
```
- 둘의 메이저, 마이너 버전은 일치하지만 패치 버전이 일치하지 않는다.
- 하지만 패치 버전에서 API사양이 변하지 않기 때문에 마이너 버전까지만 맞으면 된다.

## 라이브러리 버전과 타입 버전이 따로 관리되기 때문에 발생하는 문제
1. 둘 중 하나만 업데이트하고 다른 하나는 업데이트하지 않은 경우
   - 업데이트시 항상 버전을 맞춰줘야 한다.
   - 만약 타입 버전이 아직 준비되지 않은 경우 보강 기법등을 통해 해결한다.
2. 프로젝트의 타입스크립트 버전보다 라이브러리에서 필요로 하는 타입스크립트 버전이 높은 경우
   - 당연히 맞춰줘야한다.
   - 또는 `declare module`선언으로 라이브러리의 타입정보를 제한한다.
   - `typesVersions`를 통해 버전별로 다른 타입 선언을 제공한다.
3. `@types`의존성이 중복될 수도 있다.
   ```
   node_modules/
      @types/
          foo/
              index.d.ts @1.2.3
          bar/
              index.d.ts
              node_modules/
                  @types/
                      foo/
                          index.d.ts @2.3.4
   ```
   - 위와 같이 `bar`가 설치된 `foo`보다 상위 버전을 필요로 한다면 중첩하여 설치하게 된다.
   - 이 경우 전역으로 선언된 타입에 대해서 문제가 발생한다.
   - 당연히 버전을 맞춰주는 것이 좋다.

## 번들링
```json
{
  "name": "left-pad",
  "version": "1.3.0",
  "description": "String left pad",
  "main": "index.js",
  "types": "index.d.ts",
}
```
- 이와 같이 라이브러리 자체적으로 타입 선언을 포함하도록 할 수 있다. (`"types": "index.d.ts"`)

## 번들링의 문제점
1. 번들된 타입 선언이 갱신되지 않은 경우
   - 따로 관리되는 경우는 강제로 버전을 맞출 수 있지만 이 경우는 라이브러리에서 갱신해주지 않으면 문제를 해결할 수 없다.
2. 프로젝트 내의 타입 선언이 다른 라이브러리의 타입 선언에 의존하는 경우
   - 보통의 의존성은 `devDependencies`에 들어간다.
   - 하지만 프로젝를 공개하여 다른 사용자가 설치하게 되었을 때 `devDependencies`가 설치되지 않았을 것이기에 타입 오류가 발생하게 된다.
3. 프로젝트의 과거 버전에 있는 타입 선언에 문제가 있는 경우 과거 버전으로 돌아가서 패치 업데이트를 해야한다.
4. 타입 선언의 패치 업데이트를 자주 하기 어렵다.

## 타입 선언을 `DefinitelyTyped` 에 공개하여 커뮤니티에서 관리하고 유지보수하도록 맡기는 것이 좋다.